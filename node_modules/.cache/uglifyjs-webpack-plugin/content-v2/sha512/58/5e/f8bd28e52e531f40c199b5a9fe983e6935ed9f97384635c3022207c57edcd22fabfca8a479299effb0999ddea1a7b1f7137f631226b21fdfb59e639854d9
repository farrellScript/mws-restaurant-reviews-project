{"code":"!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=1)}([function(t,e,n){\"use strict\";!function(){function e(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function n(t,n,r){var o,i=new Promise(function(i,s){e(o=t[n].apply(t,r)).then(i,s)});return i.request=o,i}function r(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function o(t,e,r,o){o.forEach(function(o){o in r.prototype&&(t.prototype[o]=function(){return n(this[e],o,arguments)})})}function i(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function s(t,e,r,o){o.forEach(function(o){o in r.prototype&&(t.prototype[o]=function(){return function(t,e,r){var o=n(t,e,r);return o.then(function(t){if(t)return new c(t,o.request)})}(this[e],o,arguments)})})}function u(t){this._index=t}function c(t,e){this._cursor=t,this._request=e}function a(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function l(t){this._db=t}r(u,\"_index\",[\"name\",\"keyPath\",\"multiEntry\",\"unique\"]),o(u,\"_index\",IDBIndex,[\"get\",\"getKey\",\"getAll\",\"getAllKeys\",\"count\"]),s(u,\"_index\",IDBIndex,[\"openCursor\",\"openKeyCursor\"]),r(c,\"_cursor\",[\"direction\",\"key\",\"primaryKey\",\"value\"]),o(c,\"_cursor\",IDBCursor,[\"update\",\"delete\"]),[\"advance\",\"continue\",\"continuePrimaryKey\"].forEach(function(t){t in IDBCursor.prototype&&(c.prototype[t]=function(){var n=this,r=arguments;return Promise.resolve().then(function(){return n._cursor[t].apply(n._cursor,r),e(n._request).then(function(t){if(t)return new c(t,n._request)})})})}),a.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},a.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},r(a,\"_store\",[\"name\",\"keyPath\",\"indexNames\",\"autoIncrement\"]),o(a,\"_store\",IDBObjectStore,[\"put\",\"add\",\"delete\",\"clear\",\"get\",\"getAll\",\"getKey\",\"getAllKeys\",\"count\"]),s(a,\"_store\",IDBObjectStore,[\"openCursor\",\"openKeyCursor\"]),i(a,\"_store\",IDBObjectStore,[\"deleteIndex\"]),f.prototype.objectStore=function(){return new a(this._tx.objectStore.apply(this._tx,arguments))},r(f,\"_tx\",[\"objectStoreNames\",\"mode\"]),i(f,\"_tx\",IDBTransaction,[\"abort\"]),p.prototype.createObjectStore=function(){return new a(this._db.createObjectStore.apply(this._db,arguments))},r(p,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),i(p,\"_db\",IDBDatabase,[\"deleteObjectStore\",\"close\"]),l.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},r(l,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),i(l,\"_db\",IDBDatabase,[\"close\"]),[\"openCursor\",\"openKeyCursor\"].forEach(function(t){[a,u].forEach(function(e){t in e.prototype&&(e.prototype[t.replace(\"open\",\"iterate\")]=function(){var e=function(t){return Array.prototype.slice.call(t)}(arguments),n=e[e.length-1],r=this._store||this._index,o=r[t].apply(r,e.slice(0,-1));o.onsuccess=function(){n(o.result)}})})}),[u,a].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(o){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():o(r)):o(r)})})})});var d={open:function(t,e,r){var o=n(indexedDB,\"open\",[t,e]),i=o.request;return i&&(i.onupgradeneeded=function(t){r&&r(new p(i.result,t.oldVersion,i.transaction))}),o.then(function(t){return new l(t)})},delete:function(t){return n(indexedDB,\"deleteDatabase\",[t])}};t.exports=d,t.exports.default=t.exports}()},function(t,e,n){\"use strict\";n.r(e);var r=n(0);const o=n.n(r).a.open(\"mwsrestaurantreviews\",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(\"restaurants\",{keyPath:\"id\"})}});self.addEventListener(\"install\",function(t){t.waitUntil(caches.open(\"mws-v19\").then(function(t){return t.addAll([\"/\",\"/restaurant.html\",\"/manifest.json\",\"/js/app.js\",\"/js/main.js\",\"/js/restaurant_info.js\",\"/js/dbhelper.js\",\"/js/leaflet.js\",\"/css/styles.css\",\"/css/leaflet.scss\",\"/img/avatar.svg\",\"/img/back.svg\",\"/img/clock.svg\",\"/img/cuisine.svg\",\"/img/downarrow.svg\",\"/img/downcaret.svg\",\"/img/emptystar.svg\",\"/img/fullstar.svg\",\"/img/waypoint.svg\",\"/img/marker-icon.png\",\"/img/marker-icon2x.png\",\"/img/marker-shadow.png\",\"/img/logo-1x.png\",\"/img/logo-2x.png\",\"/img/logo-1x.webp\",\"/img/logo-2x.webp\",\"/img/undefined-1x.jpg\",\"/img/undefined-2x.jpg\",\"/img/undefined-1x.webp\",\"/img/undefined-2x.webp\"]).catch(function(t){console.log(\"e\",t)})}))}),self.addEventListener(\"activate\",function(t){t.waitUntil(caches.keys().then(function(t){return Promise.all(t.filter(function(t){return t.startsWith(\"mws-\")&&\"mws-v19\"!=t}).map(function(t){return caches.delete(t)}))}))}),self.addEventListener(\"fetch\",function(t){const e=new URL(t.request.url),n=e.href.endsWith(\"restaurants\")?\"-1\":e.href.split(\"/\").pop();\"1337\"===e.port?t.respondWith(o.then(function(t){return t.transaction(\"restaurants\").objectStore(\"restaurants\").get(n)}).then(function(e){return e&&e.data?e.data:fetch(t.request).then(function(t){return t.json()}).then(function(t){return o.then(function(e){return e.transaction(\"restaurants\",\"readwrite\").objectStore(\"restaurants\").put({id:n,data:t}),t})})}).then(function(t){return new Response(JSON.stringify(t))})):e.origin===location.origin&&(e.pathname.match(\"/restaurant.html(.?)\")?t.respondWith(caches.match(\"/restaurant.html(.?)\").then(function(e){return e||fetch(t.request)})):t.respondWith(caches.match(t.request).then(function(e){return e||fetch(t.request).catch(function(t){console.log(\"e\",t)})})))}),self.addEventListener(\"message\",function(t){\"skipWaiting\"==t.data.action&&self.skipWaiting().then(function(){console.log(\"skipped\")}).catch(function(t){console.log(\"error \",t)})})}]);","extractedComments":[]}