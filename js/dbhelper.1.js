class DBHelper{static get DATABASE_URL(){return"http://localhost:1337/restaurants"}static fetchRestaurants(t){fetch(DBHelper.DATABASE_URL).then(function(e){if(200===e.status)return e.json();{const r=`Request failed. Returned status of ${e.body}`;t(r,null)}}).then(function(e){t(null,e)}).catch(function(t){console.log("error: ",t)})}static fetchRestaurantById(t,e){DBHelper.fetchRestaurants((r,a)=>{if(r)e(r,null);else{const r=a.find(e=>e.id==t);r?e(null,r):e("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(t,e){DBHelper.fetchRestaurants((r,a)=>{if(r)e(r,null);else{const r=a.filter(e=>e.cuisine_type==t);e(null,r)}})}static fetchRestaurantByNeighborhood(t,e){DBHelper.fetchRestaurants((r,a)=>{if(r)e(r,null);else{const r=a.filter(e=>e.neighborhood==t);e(null,r)}})}static fetchRestaurantByCuisineAndNeighborhood(t,e,r){DBHelper.fetchRestaurants((a,n)=>{if(a)r(a,null);else{let a=n;"all"!=t&&(a=a.filter(e=>e.cuisine_type==t)),"all"!=e&&(a=a.filter(t=>t.neighborhood==e)),r(null,a)}})}static fetchNeighborhoods(t){DBHelper.fetchRestaurants((e,r)=>{if(e)t(e,null);else{const e=r.map((t,e)=>r[e].neighborhood),a=e.filter((t,r)=>e.indexOf(t)==r);t(null,a)}})}static fetchCuisines(t){DBHelper.fetchRestaurants((e,r)=>{if(e)t(e,null);else{const e=r.map((t,e)=>r[e].cuisine_type),a=e.filter((t,r)=>e.indexOf(t)==r);t(null,a)}})}static urlTextForRestaurant(t){return`View Details For ${t.name}`}static urlForRestaurant(t){return`./restaurant.html?id=${t.id}`}static imageUrlForRestaurant(t){return`/img/${t.photograph}.jpg`}static imageTextForRestaurant(t){return`${t.name}`}static ratingForRestaurant(t){let e=0,r=0;return t.reviews.map(t=>{e++,r+=parseInt(t.rating)}),Math.round(r/e)}static imageSrcSetForRestaurant(t){return`/img/${t.photograph}_1x.jpg 1x, /img/${t.photograph}_2x.jpg 2x`}static imageJpgSrcSetForRestaurant(t){return`/img/${t.photograph}_1x.jpg 1x, /img/${t.photograph}_2x.jpg 2x`}static imageWebPSrcSetForRestaurant(t){return`/img/${t.photograph}_1x.webp 1x, /img/${t.photograph}_2x.webp 2x`}static imageSrcForRestaurant(t){return`/img/${t.photograph}_1x.jpg`}static mapMarkerForRestaurant(t,e){const r=new L.marker([t.latlng.lat,t.latlng.lng],{title:t.name,alt:t.name,url:DBHelper.urlForRestaurant(t)});return r.addTo(newMap),r}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLjEuanMiXSwibmFtZXMiOlsiREJIZWxwZXIiLCJEQVRBQkFTRV9VUkwiLCJbb2JqZWN0IE9iamVjdF0iLCJjYWxsYmFjayIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImVycm9yIiwiYm9keSIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJpZCIsImZldGNoUmVzdGF1cmFudHMiLCJyZXN0YXVyYW50cyIsInJlc3RhdXJhbnQiLCJmaW5kIiwiciIsImN1aXNpbmUiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUiLCJyZXN1bHRzIiwiZmlsdGVyIiwiY3Vpc2luZV90eXBlIiwibmVpZ2hib3Job29kIiwiZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJtYXAiLCJ2IiwiaSIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJuZWlnaGJvcmhvb2RzIiwiaW5kZXhPZiIsImZldGNoQ3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsImN1aXNpbmVzIiwibmFtZSIsInBob3RvZ3JhcGgiLCJyZXZpZXdzIiwidG90YWwiLCJpdGVtIiwicGFyc2VJbnQiLCJyYXRpbmciLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwibGF0IiwibGF0bG5nIiwibG5nIiwidGl0bGUiLCJhbHQiLCJtYXJrZXIiLCJhZGRUbyIsIm5ld01hcCJdLCJtYXBwaW5ncyI6Ik1BR01BLFNBTUpDLDBCQUVFLE1BQVEsb0NBTVZDLHdCQUF3QkMsR0FDdEJDLE1BQU1KLFNBQVNDLGNBQWNJLEtBQUssU0FBQUMsR0FFaEMsR0FBRyxNQUFIQSxFQUFHQSxPQUVELE9BQU9BLEVBQVNDLE9BRmxCLENBS0UsTUFBTUMsd0NBQStDRixFQUFTRyxPQUM5RE4sRUFBU0ssRUFBVCxTQUVESCxLQUFLLFNBQUFFLEdBQ0pKLEVBQVMsS0FBS0ksS0FDZkcsTUFB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RWJZLElBQUtqQyxTQUFBQSxpQkFETEEsS0FJQWtDLE9BTEZBLEVBQUFDLE1BQUFDLFFBS1NEIiwiZmlsZSI6ImRiaGVscGVyLjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29tbW9uIGRhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnMuXHJcbiAqL1xyXG5jbGFzcyBEQkhlbHBlciB7XHJcblxyXG4gIC8qKlxyXG4gICAqIERhdGFiYXNlIFVSTC5cclxuICAgKiBDaGFuZ2UgdGhpcyB0byByZXN0YXVyYW50cy5qc29uIGZpbGUgbG9jYXRpb24gb24geW91ciBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XHJcbiAgICBjb25zdCBwb3J0ID0gODAwMCAvLyBDaGFuZ2UgdGhpcyB0byB5b3VyIHNlcnZlciBwb3J0XHJcbiAgICByZXR1cm4gYGh0dHA6Ly9sb2NhbGhvc3Q6MTMzNy9yZXN0YXVyYW50c2A7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgcmVzdGF1cmFudHMuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudHMoY2FsbGJhY2spIHtcclxuICAgIGZldGNoKERCSGVscGVyLkRBVEFCQVNFX1VSTCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAvLyBDaGVjayB0aGUgcmVzcG9uc2Ugc3RhdHVzXHJcbiAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKXtcclxuICAgICAgICAvLyBTdWNjZXNzXHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgLy8gRXJyb3JcclxuICAgICAgICBjb25zdCBlcnJvciA9IChgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke3Jlc3BvbnNlLmJvZHl9YCk7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsbnVsbClcclxuICAgICAgfVxyXG4gICAgfSkudGhlbihmdW5jdGlvbihqc29uKSB7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCxqc29uKTtcclxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJyxlKVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCBjYWxsYmFjaykge1xyXG4gICAgLy8gZmV0Y2ggYWxsIHJlc3RhdXJhbnRzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCByZXN0YXVyYW50ID0gcmVzdGF1cmFudHMuZmluZChyID0+IHIuaWQgPT0gaWQpO1xyXG4gICAgICAgIGlmIChyZXN0YXVyYW50KSB7IC8vIEdvdCB0aGUgcmVzdGF1cmFudFxyXG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gUmVzdGF1cmFudCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgIGNhbGxiYWNrKCdSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0JywgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSB0eXBlIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50cyAgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBjdWlzaW5lIHR5cGVcclxuICAgICAgICBjb25zdCByZXN1bHRzID0gcmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCwgY2FsbGJhY2spIHtcclxuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xyXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGaWx0ZXIgcmVzdGF1cmFudHMgdG8gaGF2ZSBvbmx5IGdpdmVuIG5laWdoYm9yaG9vZFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdHMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIHJlc3RhdXJhbnRzIGJ5IGEgY3Vpc2luZSBhbmQgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSByZXN0YXVyYW50c1xyXG4gICAgICAgIGlmIChjdWlzaW5lICE9ICdhbGwnKSB7IC8vIGZpbHRlciBieSBjdWlzaW5lXHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLmN1aXNpbmVfdHlwZSA9PSBjdWlzaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5laWdoYm9yaG9vZCAhPSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PSBuZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgICAgY29uc3QgbmVpZ2hib3Job29kcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0ubmVpZ2hib3Job29kKVxyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZU5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzLmZpbHRlcigodiwgaSkgPT4gbmVpZ2hib3Job29kcy5pbmRleE9mKHYpID09IGkpXHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdW5pcXVlTmVpZ2hib3Job29kcyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGN1aXNpbmVzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdldCBhbGwgY3Vpc2luZXMgZnJvbSBhbGwgcmVzdGF1cmFudHNcclxuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKVxyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gY3Vpc2luZXNcclxuICAgICAgICBjb25zdCB1bmlxdWVDdWlzaW5lcyA9IGN1aXNpbmVzLmZpbHRlcigodiwgaSkgPT4gY3Vpc2luZXMuaW5kZXhPZih2KSA9PSBpKVxyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZUN1aXNpbmVzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxyXG4gICAqL1xyXG4gIHN0YXRpYyB1cmxUZXh0Rm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGBWaWV3IERldGFpbHMgRm9yICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBwYWdlIFVSTC5cclxuICAgKi9cclxuICBzdGF0aWMgdXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGAuL3Jlc3RhdXJhbnQuaHRtbD9pZD0ke3Jlc3RhdXJhbnQuaWR9YCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0YXVyYW50IGltYWdlIFVSTC5cclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9LmpwZ2ApO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgYWx0IHRleHRcclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VUZXh0Rm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGAke3Jlc3RhdXJhbnQubmFtZX1gKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RhdXJhbnQgaW1hZ2UgYWx0IHRleHRcclxuICAgKi9cclxuICBzdGF0aWMgcmF0aW5nRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICBsZXQgcmV2aWV3cyA9IDA7XHJcbiAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgcmVzdGF1cmFudC5yZXZpZXdzLm1hcCgoaXRlbSk9PntcclxuICAgICAgcmV2aWV3cysrO1xyXG4gICAgICB0b3RhbCA9IHRvdGFsICsgcGFyc2VJbnQoaXRlbS5yYXRpbmcpXHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICByZXR1cm4gKE1hdGgucm91bmQodG90YWwvcmV2aWV3cykpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBJbWFnZSBTb3VyY2UgU2V0XHJcbiAgICovXHJcbiAgc3RhdGljIGltYWdlU3JjU2V0Rm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofV8xeC5qcGcgMXgsIC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9XzJ4LmpwZyAyeGApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBJbWFnZSBTb3VyY2UgU2V0LCBqcGdcclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VKcGdTcmNTZXRGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9XzF4LmpwZyAxeCwgL2ltZy8ke3Jlc3RhdXJhbnQucGhvdG9ncmFwaH1fMnguanBnIDJ4YCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXN0YXVyYW50IEltYWdlIFNvdXJjZSBTZXQsIHdlYnBcclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VXZWJQU3JjU2V0Rm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofV8xeC53ZWJwIDF4LCAvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofV8yeC53ZWJwIDJ4YCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBJbWFnZSBTb3VyY2UgRmFsbGJhY2tcclxuICAgKi9cclxuICBzdGF0aWMgaW1hZ2VTcmNGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpIHtcclxuICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9XzF4LmpwZ2ApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFwIG1hcmtlciBmb3IgYSByZXN0YXVyYW50LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBtYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG1hcCkge1xyXG4gICAgLy8gaHR0cHM6Ly9sZWFmbGV0anMuY29tL3JlZmVyZW5jZS0xLjMuMC5odG1sI21hcmtlciAgXHJcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgTC5tYXJrZXIoW3Jlc3RhdXJhbnQubGF0bG5nLmxhdCwgcmVzdGF1cmFudC5sYXRsbmcubG5nXSxcclxuICAgICAge3RpdGxlOiByZXN0YXVyYW50Lm5hbWUsXHJcbiAgICAgIGFsdDogcmVzdGF1cmFudC5uYW1lLFxyXG4gICAgICB1cmw6IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudClcclxuICAgICAgfSlcclxuICAgICAgbWFya2VyLmFkZFRvKG5ld01hcCk7XHJcbiAgICByZXR1cm4gbWFya2VyO1xyXG4gICB9IFxyXG4gICAvKiBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXHJcbiAgICAgIHRpdGxlOiByZXN0YXVyYW50Lm5hbWUsXHJcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgbWFwOiBtYXAsXHJcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1B9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hcmtlcjtcclxuICB9Ki9cclxuXHJcbn1cclxuIl19
